<!-- タイトル
ISPについての概要とどのようにネットワークが接続されているのか
-->

# はじめに

ISP (Internet Service Provider) って聞いたことがあるけど，実際何をしているのかよくわからない，という人も多いのではないでしょうか？

この記事では，ISPについて，ネットワークに詳しくない人にもわかりやすく解説することを目指します．

# ISPとは何か

ISPとは，インターネットサービスプロバイダ（Internet Service Provider）の略で，インターネット接続サービスを提供する企業や組織のことを指す．ISPは，個人や企業がインターネットに接続できるようにする役割を担っている．

ISPが行っている仕事は以下のようなものがある：

1. **インターネット接続サービス**:
ISPは，家庭や企業に対してインターネット接続を提供している．現在では，光ファイバーが主流となっており，高速なインターネット接続が可能となっている．1Gbps以上の速度が当たり前になってきている．（1Gbps: 1時間の動画（フルHD）を10秒ちょっとでダウンロードできる）

2. **IPアドレスの割り当て**:
ISPは，インターネットに接続するために必要なIPアドレスをユーザに割り当てる役割を果たしている．IPアドレスは，インターネット上でデバイスを識別するための一意の番号であり，ISPが管理しているIPアドレスプールからユーザに割り当てられる．

3. **インターネットバックボーンとの接続**:
ISPは，インターネットのバックボーンネットワークと接続している．バックボーンネットワークは，インターネットの主要な通信経路であり，世界中のISPやデータセンターを結んでいる．ISPがバックボーンネットワークと接続することで，ユーザはインターネット上のさまざまなサービスにアクセスできるようになる．

4. **DNSの提供**:
ISPは，ドメインネームシステム（DNS）を提供している．DNSは，ドメイン名（例: google.com）をIPアドレスに変換する役割を果たしており，インターネットを利用するために必要なサービスである．  
DNSがなければ，ユーザはウェブサイトにアクセスする際にIPアドレス（例: 142.250.190.78）のような数字を直接入力しなければならず，非常に不便になる．  

5. **セキュリティ・フィルタリングサービス**:
ISPは，セキュリティ対策やフィルタリングサービスを提供することもある．これにより，ユーザはマルウェアや不正アクセスから保護される．  
具体的には，ウイルスやスパムメールの検知・遮断，悪意のあるウェブサイトへのアクセス制限，DDoS攻撃への対策などが挙げられる．また，家庭向けには有害サイトのブロックやペアレンタルコントロール機能を提供することもある．これらのサービスにより，ユーザはより安全にインターネットを利用できるようになる．

# ISPの階層構造

<!-- ISPの階層構造の図 -->

ISPは，その規模や提供するサービスに応じて，以下のような階層構造を持っている：

1. **Tier1 ISP**:
Tier1 ISPは，インターネットのバックボーンネットワークを構築・運営している最上位のISPである．これらのISPは，世界中の他のISPと直接接続しており，インターネット全体のトラフィックの大部分を処理している．

2. **Tier2 ISP**:
Tier2 ISPは，Tier1 ISPからインターネット接続を購入し，地域的なインターネットサービスを提供している．これらのISPは，Tier1 ISPと接続しているだけでなく，他のTier2 ISPとも接続していることが多い．

3. **Tier3 ISP**:
Tier3 ISPは，主にエンドユーザ（個人や小規模企業）に対してインターネット接続サービスを提供している．これらのISPは，Tier2 ISPから接続を購入し，地域的なサービスを提供している．

## トランジット

ISP間でインターネットトラフィックを転送する方法として，「トランジット」がある．トランジットは，あるISPが他のISPからインターネット接続を購入し，自身のネットワークを通じてトラフィックを転送する仕組みである．これにより，ISPは自社のネットワーク外へのアクセスを提供できるようになり，ユーザは世界中のウェブサイトやサービスにアクセスできるようになる．

トランジットは，Tier1 ISPとTier2 ISP，Tier2 ISPとTier3 ISPの間で行われることが多い．これらは，従量課金制であり，転送されるデータ量に応じて料金が発生する．基本的に高コストであるため，ISPはトランジットの使用を最小限に抑えるために，後述の「ピアリング」も活用している．

## プライベートピアリング

ISP間で直接接続を確立し，トラフィックを交換する方法として，「プライベートピアリング」がある．プライベートピアリングは，2つのISPが直接接続を確立し，自身のネットワークを通じてトラフィックを交換する仕組みである．これにより，ISPはトランジットの使用を減らし，コスト削減や通信遅延の改善を図ることができる．

プライベートピアリングは，主にネットワークの規模が同等のISP間で行われることが多い．これらは，通常，無償で行われるため，ISPにとってはコスト削減の手段として非常に有効である．
しかし，プライベートピアリングは，1対1の接続であるため，多数のISPとピアリングを行う場合，接続のためのネットワーク機器のコストが増加するというデメリットもある．

## パブリックピアリング

パブリックピアリングは，インターネットエクスチェンジ（IX）を介して複数のISPがトラフィックを交換する方法である．IXは，複数のISPが集まるポイントであり，ここでISP同士が接続を確立し，トラフィックを交換する．これにより，ISPは多数の他のISPと効率的にトラフィックを交換できるようになる．
IXを介したピアリングは，従量課金制ではなく，通常は接続費用のみが発生するため，ISPにとってはプライベートピアリングと合わせて，コスト削減の手段として非常に有効である．

近年では，コンテンツ事業者（動画配信サービスやSNSなど）やクラウド事業者（Google, AWS, Microsoft Azureなど）もIXに参加し，ISPと直接ピアリングを行うケースが増えている．これにより，ユーザはコンテンツやクラウドサービスへのアクセスがより高速・安定になる．また，事業者側もトラフィックの効率的な配信やコスト削減が可能となるため，IXはインターネット全体の品質向上に重要な役割を果たしている．

# まとめ

ISP（インターネットサービスプロバイダ）は，インターネット接続サービスを提供する企業や組織であり，ユーザがインターネットに接続できるようにする役割を担っている．ISPは，インターネット接続サービスの提供，IPアドレスの割り当て，インターネットバックボーンとの接続，DNSの提供，セキュリティ・フィルタリングサービスなど，さまざまな仕事を行っている．

ISPは，その規模や提供するサービスに応じて，Tier1，Tier2，Tier3の階層構造を持っており，それぞれ異なる役割を果たしている．また，ISP間でインターネットトラフィックを転送する方法として，トランジット，プライベートピアリング，パブリックピアリングがあり，これらを組み合わせて効率的なネットワーク運用を行っている．
